{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>图书后台管理系统</title>
    <!--favicon-->
    <link rel="icon" href="{% static "/images/favicon.ico" %}" type="image/x-icon">
    <!-- simplebar CSS-->
    <link href="{% static "/plugins/simplebar/css/simplebar.css" %}" rel="stylesheet"/>
    <link href="{% static "/plugins/fancybox/css/jquery.fancybox.min.css" %}" rel="stylesheet"/>
    <!-- Bootstrap core CSS-->
    <link href="{% static "/css/bootstrap.min.css" %}" rel="stylesheet"/>
    <!-- animate CSS-->
    <link href="{% static "/css/animate.css" %}" rel="stylesheet" type="text/css"/>
    <!-- Icons CSS-->
    <link href="{% static "/css/icons.css" %}" rel="stylesheet" type="text/css"/>
    <!-- Sidebar CSS-->
    <link href="{% static "/css/sidebar-menu.css" %}" rel="stylesheet"/>
    <!-- Custom Style-->
    <link href="{% static "/css/app-style.css" %}" rel="stylesheet"/>
    <!--favicon-->
    <link rel="icon" href="{% static "/images/favicon.ico" %}" type="image/x-icon">
    <!-- simplebar CSS-->
    <link href="{% static "/plugins/simplebar/css/simplebar.css" %}" rel="stylesheet"/>
    <!-- Bootstrap core CSS-->
    <link href="{% static "/css/bootstrap.min.css" %}" rel="stylesheet"/>
    <!--Data Tables -->
    <link href="{% static "/plugins/bootstrap-datatable/css/dataTables.bootstrap4.min.css" %}" rel="stylesheet"
          type="text/css">
    <link href="{% static "/plugins/bootstrap-datatable/css/buttons.bootstrap4.min.css" %}" rel="stylesheet"
          type="text/css">
    <!-- animate CSS-->
    <link href="{% static "css/animate.css" %}" rel="stylesheet" type="text/css"/>
    <!-- Icons CSS-->
    <link href="{% static "/css/icons.css" %}" rel="stylesheet" type="text/css"/>
    <!-- Sidebar CSS-->
    <link href="{% static "/css/sidebar-menu.css" %}" rel="stylesheet"/>
    <!-- Custom Style-->
    <link href="{% static "/css/app-style.css" %}" rel="stylesheet"/>
    <style>
        #pie { 
            width: 800px !important;
            height: 320px;
            background-color: white !important;
            z-index:999;position: fixed;
            left: 400px;
        }
        #main2 { 
            width: 800px !important;
            height: 320px;
            background-color: white !important;
            z-index:999;position: fixed;
            left: 300px;
        }
    </style>

</head>

<body class="bg-dark">

<!-- Start wrapper-->
<div id="wrapper">
   
    <!--Start sidebar-wrapper-->
    <div id="sidebar-wrapper" data-simplebar="" data-simplebar-auto-hide="true"
         class="border-right border-light-3 shadow-none">
        <div class="brand-logo border-light-3">
            <a href="/librarian/index/">
                <img src="{% static "/images/logo-icon.png" %}" class="logo-icon" alt="logo icon">
                <h5 class="logo-text">图书后台管理系统</h5>
            </a>
        </div>
        <ul class="sidebar-menu do-nicescrol">
            <li class="sidebar-header">主导航</li>
            <li>
                <a href="index.html" class="waves-effect">
                    <i class="zmdi zmdi-view-dashboard"></i> <span>出版社管理页面</span> <i
                        class="fa fa-angle-left pull-right"></i>
                </a>
                <ul class="sidebar-submenu">
                    <li><a href="/librarian/add_publisher"><i class="zmdi zmdi-star-outline"></i>添加出版社</a></li>
                    <li><a href="/librarian/publisher_list/"><i class="zmdi zmdi-star-outline"></i>出版社列表</a></li>
                </ul>
            </li>
            <li>
                <a href="javaScript:void(0);" class="waves-effect">
                    <i class="zmdi zmdi-layers"></i>
                    <span>知识考试中心管理页面</span> <i class="fa fa-angle-left pull-right"></i>
                </a>
                <ul class="sidebar-submenu">
                    <li><a href="/librarian/add_book"><i class="zmdi zmdi-star-outline"></i> 添加知识</a></li>
                    <li><a href="/librarian/book_list"><i class="zmdi zmdi-star-outline"></i> 知识考试列表</a></li>
                </ul>
            </li>
            <li>
                <a href="javaScript:void(0);" class="waves-effect">
                    <i class="zmdi zmdi-gamepad"></i> <span>作者管理页面</span>
                    <i class="fa fa-angle-left float-right"></i>
                </a>
                <ul class="sidebar-submenu">
                    <li><a href="/librarian/add_author"><i class="zmdi zmdi-star-outline"></i> 添加作者</a></li>
                    <li><a href="/librarian/author_list"><i class="zmdi zmdi-star-outline"></i> 作者列表</a></li>
                </ul>
            </li>
            <li>
                <a href="javaScript:void(0);" class="waves-effect">
                    <i class="zmdi zmdi-gamepad"></i> <span>用户管理页面</span>
                    <i class="fa fa-angle-left float-right"></i>
                </a>
                <ul class="sidebar-submenu">
                    <li><a href="/librarian/add_user"><i class="zmdi zmdi-star-outline"></i> 添加用户</a></li>
                    <li><a href="/librarian/user_list"><i class="zmdi zmdi-star-outline"></i> 用户列表</a></li>
                </ul>
            </li>

            <li class="sidebar-header">更多</li>
            <li><a href="https://t.zsxq.com/rnmeYJQ" class="waves-effect"><i class="zmdi zmdi-share text-info"></i></a>
            </li>
        </ul>

    </div>
    <!--End sidebar-wrapper-->

    <!--Start topbar header-->
    <header class="topbar-nav">
        <nav class="navbar navbar-expand fixed-top bg-dark border-bottom border-light-3">
            <ul class="navbar-nav mr-auto align-items-center">
                <li class="nav-item">
                    <a class="nav-link toggle-menu" href="javascript:void(0);">
                        <i class="icon-menu menu-icon"></i>
                    </a>
                </li>
                {#搜索框#}
                <li class="nav-item">
                    <form action="{% url "librarian:search" %}" method="post">
                        {% csrf_token %}
                        <div class="card-body">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="zmdi zmdi-book"></i></span>
                                </div>
                                <input type="text" name="search_keywords" class="form-control"/>

                                <div class="input-group-append">
                                    <button class="btn-outline-facebook"><i
                                            class="fa fa-search"></i></button>

                                </div>
                            </div>
                        </div>
                    </form>
                </li>
                <li class="nav-item">
                    <form action="{% url "librarian:search2" %}" method="post">
                        {% csrf_token %}
                        <div class="card-body">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">状态<i class="zmdi zmdi-book"></i></span>
                                </div>
                                <input type="text" name="search_keywords2" class="form-control"/>

                                <div class="input-group-append">
                                    <button class="btn-outline-facebook"><i
                                            class="fa fa-search"></i></button>

                                </div>
                            </div>
                        </div>
                    </form>
                </li>
            </ul>
            <ul class="navbar-nav align-items-center right-nav-link">
                <li>
                    <button class="studyshow" onclick="study()">学习情况</button>
                </li>
                <li class="nav-item dropdown-lg">
                    <a class="nav-link dropdown-toggle dropdown-toggle-nocaret waves-effect" data-toggle="dropdown"
                       href="javascript:void(0);">
                        <i class="fa fa-envelope-open-o text-white"></i><span
                            class="badge badge-secondary badge-up">12</span></a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                You have 12 new messages
                                <span class="badge badge-secondary">12</span>
                            </li>
                            <li class="list-group-item">
                                <a href="javaScript:void(0);">
                                    <div class="media">
                                        <div class="avatar"><img class="align-self-start mr-3"
                                                                 src="{% static "/images/avatars/avatar-5.png" %}"
                                                                 alt="user avatar"></div>
                                        <div class="media-body">
                                            <h6 class="mt-0 msg-title">Jhon Deo</h6>
                                            <p class="msg-info">Lorem ipsum dolor sit amet...</p>
                                            <small>Today, 4:10 PM</small>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="javaScript:void(0);">
                                    <div class="media">
                                        <div class="avatar"><img class="align-self-start mr-3"
                                                                 src="{% static "/images/avatars/avatar-6.png" %}"
                                                                 alt="user avatar"></div>
                                        <div class="media-body">
                                            <h6 class="mt-0 msg-title">Sara Jen</h6>
                                            <p class="msg-info">Lorem ipsum dolor sit amet...</p>
                                            <small>Yesterday, 8:30 AM</small>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="javaScript:void(0);">
                                    <div class="media">
                                        <div class="avatar"><img class="align-self-start mr-3"
                                                                 src="{% static "/images/avatars/avatar-7.png" %}"
                                                                 alt="user avatar"></div>
                                        <div class="media-body">
                                            <h6 class="mt-0 msg-title">Dannish Josh</h6>
                                            <p class="msg-info">Lorem ipsum dolor sit amet...</p>
                                            <small>5/11/2021, 2:50 PM</small>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <a href="javaScript:void(0);">
                                    <div class="media">
                                        <div class="avatar"><img class="align-self-start mr-3"
                                                                 src="{% static "/images/avatars/avatar-8.png" %}"
                                                                 alt="user avatar"></div>
                                        <div class="media-body">
                                            <h6 class="mt-0 msg-title">Katrina Mccoy</h6>
                                            <p class="msg-info">Lorem ipsum dolor sit amet.</p>
                                            <small>1/11/2021, 2:50 PM</small>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="nav-item language">
                    <a class="nav-link dropdown-toggle dropdown-toggle-nocaret waves-effect" data-toggle="dropdown"
                       href="#"><i class="flag-icon flag-icon-cn"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link dropdown-toggle dropdown-toggle-nocaret" data-toggle="dropdown" href="#">
                        <span class="user-profile"><img src="{% static "/images/avatars/avatar-13.png" %}"
                                                        class="img-circle" alt="user avatar"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right">
                        {% if request.session.username %}
                            <li class="dropdown-item user-details">
                                <a href="javaScript:void(0);">
                                    <div class="media">
                                        <div class="avatar"><img class="align-self-start mr-3"
                                                                 src="{% static "/images/avatars/avatar-13.png" %}"
                                                                 alt="user avatar"></div>
                                        <div class="media-body">
                                            <h6 class="mt-2 user-title">{{ request.session.nickname }}</h6>
                                            <p class="user-subtitle">mccoy@example.com</p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="dropdown-divider"></li>
                            <li class="dropdown-item"><i class="icon-power mr-2"></i><a href="/librarian/logout/">登出</a>

                            </li>
                        {% else %}
                            <li class="dropdown-item user-details">
                                <a href="javaScript:void(0);">
                                    <div class="media">
                                        <div class="media-body">
                                            <h6 class="mt-2 user-title">请登录</h6>
                                            <p class="user-subtitle">关注微信公众号：梓栋Code</p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        {% endif %}


                    </ul>
                </li>
                
            </ul>
        </nav>
    </header>
    <!--End topbar header-->

    <div class="clearfix"></div>

    {% block content %}

    {% endblock %}



    <!--End content-wrapper-->
    <!--Start Back To Top Button-->
    <a href="javaScript:void(0);" class="back-to-top"><i class="fa fa-angle-double-up"></i> </a>
    <!--End Back To Top Button-->

    <!--Start footer-->

    <!--End footer-->

</div><!--End wrapper-->
<div class="study_data"  style="background-color: blue;position:absolute; width: 200px;height:200px;display: none">
    <p>555555555555555</p>
    <p>66666666666666</p>
    <div id="pie" ,align ="center" style="background-color: white"></div>
    <div id="main2" style="width:80%;height:400px;margin: 0 auto"></div>
    <div type="button" class="studyclose" style=" left: 75%;background-color: blue;position:absolute;"><a style="font-size:40px" href="#">关闭</a></div>
</div>
<!-- Bootstrap core JavaScript-->
<script src="{% static "/js/jquery.min.js" %}"></script>
<script src="{% static "/js/jquery-1.10.1.js" %}"></script>
<script src="{% static "/js/jquery-3.0.0.js" %}"></script>
<script src="{% static "/js/popper.min.js" %}"></script>
<script src="{% static "/js/bootstrap.min.js" %}"></script>

<!-- simplebar js -->
<script src="{% static "/plugins/simplebar/js/simplebar.js" %}"></script>
<!-- waves effect js -->
<script src="{% static "/js/waves.js" %}"></script>
<!-- sidebar-menu js -->
<script src="{% static "/js/sidebar-menu.js" %}"></script>
<!-- Custom scripts -->
<script src="{% static "/js/app-script.js" %}"></script>
<!-- Chart js -->
<script src="{% static "/plugins/Chart.js/Chart.min.js" %}"></script>
<!--Peity Chart -->
<script src="{% static "/plugins/peity/jquery.peity.min.js" %}"></script>
<!--Data Tables js-->
<script src="{% static "/plugins/bootstrap-datatable/js/jquery.dataTables.min.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/dataTables.bootstrap4.min.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/dataTables.buttons.min.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/buttons.bootstrap4.min.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/jszip.min.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/pdfmake.min.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/vfs_fonts.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/buttons.html5.min.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/buttons.print.min.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/buttons.colVis.min.js" %}"></script>
<script src="{% static "/plugins/alerts-boxes/js/sweetalert.min.js" %}"></script>
<script src="{% static "/plugins/alerts-boxes/js/sweet-alert-script.js" %}"></script>

<script src="{% static "/plugins/notifications/js/lobibox.min.js" %}"></script>
<script src="{% static "/plugins/notifications/js/notifications.min.js" %}"></script>
<script src="{% static "/plugins/notifications/js/notification-custom-script.js" %}"></script>
<script src="{% static "/plugins/bootstrap-datatable/js/jquery-1.10.1" %}"></script>
<script src="{% static "/plugins/fancybox/js/jquery.fancybox.min.js" %}"></script>
<script src="https://cdn.bootcss.com/echarts/3.7.1/echarts.min.js"></script>
</head>
<script>
    // 饼状图
    // 基于准备好的dom，初始化echarts实例
    var pie = echarts.init(document.getElementById('pie'));
    // 指定图表的配置项和数据
    pieOption = {
        // 标题
        title: {
//             text: 'echarts实现饼状图',
            // align="center"
            // text-align:center
            
        },
        // 图例
        tooltip: {
            show: true,
            trigger: "item",
            backgroundColor: "#1677FF",
            // {a}（系列名称），{b}（数据项名称），{c}（数值）, {d}（百分比）
            formatter: "{a}：{b}<br/>{c}个({d}%)"
        },
        // 不同区域的颜色
        color: ['#3e87ff', '#c0c0c0', '#b9cfec','#191970','#4B0082','#44ff99', '#8B0000',
         '#0000ff','#ff1100', '#ff6600', '#ffbb00', '#020302','#ff0000','#ff00ff','#DC143C',
         '#808000','#5F91A0','#FF1493','#000000','#008080','#800000','#FFFFFF','#006400'],
        series: [
            {
                name: '课程种类',
                type: 'pie',
                // 数组的第一项是内半径，第二项是外半径；可以设置不同的内外半径显示成圆环图
                radius: '50%',
                // 饼图的中心（圆心）坐标，数组的第一项是横坐标，第二项是纵坐标；设置成百分比时第一项是相对于容器宽度，第二项是相对于容器高度
                center: ['50%', '40%'],
                data: [
                    { value: 9795, name: '创业' },
                    { value: 19840, name: '电子' },
                    { value: 38911, name: '工程' },
                    { value: 6609, name: '公共管理' },
                    { value: 3243, name: '化学' },
                    { value: 1221, name: '环境' },
                    { value: 111541, name: '计算机' },
                    { value: 641, name: '建筑' },
                    { value: 10783, name: '教育' },
                    { value: 24394, name: '经管会计' },
                    { value: 10380, name: '历史' },
                    { value: 10380, name: '汽车' },
                    { value: 46372, name: '社科法律' },
                    { value: 3371, name: '生命科学' },
                    { value: 14186, name: '数学' },
                    { value: 17659, name: '外语' },
                    { value: 15163, name: '文学' },
                    { value: 14531, name: '物理' },
                    { value: 68895, name: '医学健康' },
                    { value: 20185, name: '艺术设计' },
                    { value: 10012, name: '哲学' },
                    { value: 1139, name: '职场' },
                    { value: 9204, name: '其它' }
                ],
                itemStyle: {
                    // 显示图例
                    normal: {
                        label: {
                            show: true
                        },
                        labelLine: {
                            show: true
                        }
                    },
                    emphasis: {
                        // 图形阴影的模糊大小
                        shadowBlur: 10,
                        // 阴影水平方向上的偏移距离
                        shadowOffsetX: 0,
                        // 阴影颜色
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    pie.setOption(pieOption);
</script>
<script type="text/javascript">
    $(function(){
            // //点击出现
            // $('.studyshow').click(function(){
            //     console.log(666666)
            //     $('.study_data').slideDown();
            // });

            //点击隐藏div1
            $('.studyclose').click(function(){
                $('.study_data').slideUp();
            });

        });
</script>
<script type="text/javascript">
    function study() {
        console.log(666666)
        $('.study_data').slideDown()


        $(".study_data").attr('style', 'z-index:999;position: fixed; width:1000px;height:00px;top:10px;');
        hobj=$.ajax({url:"http://127.0.0.1:8000/librarian/study",async:false});
        let datas = hobj.responseJSON.datas
        course = hobj.responseJSON.course
        achievement = hobj.responseJSON.achievement
        console.log(datas)
        console.log(Object.prototype.toString.call(datas ))
        let arr_1=[]
        for(var i in datas){
            arr_1.push(i)
        }
        // 饼状图
        // 基于准备好的dom，初始化echarts实例
        var pie = echarts.init(document.getElementById('pie'));
        var myChart = echarts.init(document.getElementById('main2'));
        // 指定图表的配置项和数据
        pieOption = {
            // 标题
            title: {
                text: '通过-未通过',
				// align="center"
				// text-align:center
				
            },
            
            // 不同区域的颜色
            color: ['#ff1100', '#ff6600', '#ffbb00'],
            series: [
                {
                    name: '课程种类',
                    type: 'pie',
                    // 数组的第一项是内半径，第二项是外半径；可以设置不同的内外半径显示成圆环图
                    radius: '50%',
                    // 饼图的中心（圆心）坐标，数组的第一项是横坐标，第二项是纵坐标；设置成百分比时第一项是相对于容器宽度，第二项是相对于容器高度
                    center: ['40%', '40%'],
                    data: datas,
                    itemStyle: {
                        // 显示图例
                        normal: {
                            label: {
                                show: true
                            },
                            labelLine: {
                                show: true
                            }
                        },
                        emphasis: {
                            // 图形阴影的模糊大小
                            shadowBlur: 10,
                            // 阴影水平方向上的偏移距离
                            shadowOffsetX: 0,
                            // 阴影颜色
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        
        option = {
            title: {
                text: '课程-成绩',
                textStyle: { //主标题文本样式{"fontSize": 18,"fontWeight": "bolder","color": "#333"}
                    fontSize: 14,
                    fontStyle: 'normal',
                    fontWeight: 'bold',
                },
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: course
            },
            toolbox: {
                show: true,
                feature: {
                    dataView: {
                        show: true,
                        readOnly: false
                    },
                    magicType: {
                        show: true,
                        type: ['line', 'bar']
                    },
                    restore: {
                        show: true
                    },
                    saveAsImage: {
                        show: true
                    }
                }
            },
            calculable: true,
            xAxis: [{
                type: 'category',
                //name: 'min_sup(%)'
                data: course,
                name: '课程',
                position: 'left'
            }],
            yAxis: [{
                type: 'value',
                name: '成绩',
                position: 'left'
            }],
            series: [{
                name: '成绩',
                type: 'bar',
                data: achievement,
                color: '#800000',
                barWidth: 30,
            },
            ]
        };
								
                
        pie.setOption(pieOption);    
        myChart.setOption(option); 
    }
    
</script>
{#绘制首页动态图标#}
{% block js %}

{% endblock %}
</body>
</html>

